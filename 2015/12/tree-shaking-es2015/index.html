<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Tree-shaking ES2015 | Hans Chan&#39;s Blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <!-- hexo-algolia -->
  <meta property="algolia:search" data-application-id="1DJDVE2IL4" data-api-key="c784a416f2e153ae75b1288ed8c3b0d8" data-index-name="BLOG">

  <meta name="description" content="ğŸŒ²ğŸ… ~~ åœ£è¯å¿«ä¹ ~~ ğŸ‰âœ¨ Rollupä¹‹å‰çœ‹åˆ° rollup.js å°±è§‰å¾—å¾ˆæœ‰è¶£ï¼Œåæ¥ç»ˆäºæœ‰ç©ºï¼ŒæŠŠæˆ‘çš„å°é¡¹ç›® silly-datetime æ”¹æˆäº† ES2015 ç„¶åç”¨ Rollup è½¬æˆ CommonJS å’Œ UMD ä¸¤ä¸ªç‰ˆæœ¬åˆ†åˆ«ç»™ npm å’Œ Bower ä½¿ç”¨ã€‚">
<meta name="keywords" content="ES2015,Browserify,webpack,Rollup">
<meta property="og:type" content="article">
<meta property="og:title" content="Tree-shaking ES2015">
<meta property="og:url" content="http://csbun.github.io/blog/2015/12/tree-shaking-es2015/index.html">
<meta property="og:site_name" content="Hans Chan&#39;s Blog">
<meta property="og:description" content="ğŸŒ²ğŸ… ~~ åœ£è¯å¿«ä¹ ~~ ğŸ‰âœ¨ Rollupä¹‹å‰çœ‹åˆ° rollup.js å°±è§‰å¾—å¾ˆæœ‰è¶£ï¼Œåæ¥ç»ˆäºæœ‰ç©ºï¼ŒæŠŠæˆ‘çš„å°é¡¹ç›® silly-datetime æ”¹æˆäº† ES2015 ç„¶åç”¨ Rollup è½¬æˆ CommonJS å’Œ UMD ä¸¤ä¸ªç‰ˆæœ¬åˆ†åˆ«ç»™ npm å’Œ Bower ä½¿ç”¨ã€‚">
<meta property="og:locale" content="en">
<meta property="og:updated_time" content="2018-12-12T13:06:56.798Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Tree-shaking ES2015">
<meta name="twitter:description" content="ğŸŒ²ğŸ… ~~ åœ£è¯å¿«ä¹ ~~ ğŸ‰âœ¨ Rollupä¹‹å‰çœ‹åˆ° rollup.js å°±è§‰å¾—å¾ˆæœ‰è¶£ï¼Œåæ¥ç»ˆäºæœ‰ç©ºï¼ŒæŠŠæˆ‘çš„å°é¡¹ç›® silly-datetime æ”¹æˆäº† ES2015 ç„¶åç”¨ Rollup è½¬æˆ CommonJS å’Œ UMD ä¸¤ä¸ªç‰ˆæœ¬åˆ†åˆ«ç»™ npm å’Œ Bower ä½¿ç”¨ã€‚">
  
  
    <link rel="icon" href="favicon.ico">
  
  
 <link href='https://fonts.googleapis.com/css?family=Open+Sans:400italic,400,600' rel='stylesheet' type='text/css'>
 <link href='https://fonts.googleapis.com/css?family=Source+Code+Pro' rel='stylesheet' type='text/css'>


  <link rel="stylesheet" href="/blog/css/style.css">
  <link rel="stylesheet" href="/blog/font-awesome/css/font-awesome.min.css">
  

<!-- Hotjar Tracking Code for csbun.github.io/blog/ -->
<script>
(function(h,o,t,j,a,r){
  h.hj=h.hj||function(){(h.hj.q=h.hj.q||[]).push(arguments)};
  h._hjSettings={hjid:483587,hjsv:5};
  a=o.getElementsByTagName('head')[0];
  r=o.createElement('script');r.async=1;
  r.src=t+h._hjSettings.hjid+j+h._hjSettings.hjsv;
  a.appendChild(r);
})(window,document,'//static.hotjar.com/c/hotjar-','.js?sv=');
</script>
<!-- End Hotjar Tracking Code -->

<!-- Google Analytics -->
<script type="text/javascript">
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-69725995-1', 'auto');
ga('send', 'pageview');

</script>
<!-- End Google Analytics -->


  
<meta name="google-site-verification" content="w7Jze6jotMvxHSzsNqwEukg5f2L6VNFgRcPZBwBGln8" />


  
  <!-- Google Adsense -->
  <script data-ad-client="ca-pub-6414613701003177" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
</head>
<body>
  <div id="container">
    <header id="header">
  <div id="header-main" class="header-inner">
    <div class="outer">
      <a href="/blog/" id="logo"><i class="logo" style="background-image: url(/blog/css/images/logo.png)"></i><span class="site-title">Hans Chan&#39;s Blog</span></a>
      <nav id="main-nav">
        
          <a class="main-nav-link" href="/blog/.">Home</a>
        
          <a class="main-nav-link" href="/blog/archives">Archives</a>
        
          <a class="main-nav-link" href="/blog/tags">Tags</a>
        
      </nav>
      
        <nav id="sub-nav">
          <div class="profile" id="profile-nav">
            <a id="profile-anchor" href="javascript:;"><img class="avatar" src="https://www.gravatar.com/avatar/dc4674b8f674322328c02339cf8da615"><i class="fa fa-caret-down"></i></a>
          </div>
        </nav>
      
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit"> </button><input type="hidden" name="sitesearch" value="http://csbun.github.io/blog"></form>
      </div>
    </div>
  </div>
  <div id="main-nav-mobile" class="header-sub header-inner">
    <table class="menu outer">
      <tr>
        
          <td><a class="main-nav-link" href="/blog/.">Home</a></td>
        
          <td><a class="main-nav-link" href="/blog/archives">Archives</a></td>
        
          <td><a class="main-nav-link" href="/blog/tags">Tags</a></td>
        
        <td>
          <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><input type="hidden" name="sitesearch" value="http://csbun.github.io/blog"></form>
        </td>
      </tr>
    </table>
  </div>
</header>

    <div class="outer">
      
        <aside id="profile">
  <div class="inner profile-inner">
    <div class="base-info profile-block">
      <img id="avatar" src="https://www.gravatar.com/avatar/dc4674b8f674322328c02339cf8da615?s=256">
      <h2 id="name">å‰èµ·æ¥å°±å¯ä»¥çƒ§</h2>
      <h3 id="title">å‚»é€¼åˆ‡å›¾ä»”</h3>
      <span id="location"><i class="fa fa-map-marker"></i>å¹¿å· Â· Guangzhou, China</span>
      <a id="follow" href="https://github.com/csbun/">FOLLOW</a>
    </div>
    <div class="article-info profile-block">
      <div class="article-info-block">
        40
        <span>posts</span>
      </div>
      <div class="article-info-block">
        66
        <span>tags</span>
      </div>
    </div>
    
    <div class="contact-info profile-block">
      <table class="contact-list">
        <tr>
          
          <td><a href="https://github.com/csbun" target="_blank" title="github"><i class="fa fa-github"></i></a></td>
          
          <td><a href="/blog/atom.xml" target="_blank" title="rss"><i class="fa fa-rss"></i></a></td>
          
        </tr>
      </table>
    </div>
    
    
  </div>
</aside>

      
      <section id="main"><article id="post-tree-shaking-es2015" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      
	
    <div class="article-banner">
		  <img src="/blog/gallery/taiwan/DSC03388.jpg">
    </div>
	


    
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      Tree-shaking ES2015
    </h1>
  

        <div class="article-meta">
          
  <div class="article-date">
    <i class="fa fa-calendar"></i>
    <a href="/blog/2015/12/tree-shaking-es2015/">
      <time datetime="2015-12-25T13:27:23.000Z" itemprop="datePublished">2015-12-25</time>
    </a>
  </div>


          
        </div>
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
                
        <p>ğŸŒ²ğŸ… ~~ åœ£è¯å¿«ä¹ ~~ ğŸ‰âœ¨</p>
<h2><span id="rollup">Rollup</span></h2><p>ä¹‹å‰çœ‹åˆ° <a href="http://rollupjs.org/" target="_blank" rel="noopener">rollup.js</a> å°±è§‰å¾—å¾ˆæœ‰è¶£ï¼Œåæ¥ç»ˆäºæœ‰ç©ºï¼ŒæŠŠæˆ‘çš„å°é¡¹ç›® <a href="https://github.com/csbun/silly-datetime" target="_blank" rel="noopener">silly-datetime</a> æ”¹æˆäº† ES2015 ç„¶åç”¨ Rollup è½¬æˆ CommonJS å’Œ UMD ä¸¤ä¸ªç‰ˆæœ¬åˆ†åˆ«ç»™ <a href="https://www.npmjs.com/" target="_blank" rel="noopener">npm</a> å’Œ <a href="http://bower.io/" target="_blank" rel="noopener">Bower</a> ä½¿ç”¨ã€‚</p>
<a id="more"></a>
<p>ç®€å•è´´ä¸€ä¸‹ä½¿ç”¨æ–¹æ³•ï¼šåœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ª <em><a href="https://github.com/csbun/silly-datetime/blob/master/rollup.js" target="_blank" rel="noopener">rollup.js</a></em> æ–‡ä»¶ï¼Œè°ƒç”¨ Rollup çš„ APIï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> rollup = <span class="built_in">require</span>( <span class="string">'rollup'</span> );</span><br><span class="line"><span class="keyword">var</span> babel = <span class="built_in">require</span>(<span class="string">'rollup-plugin-babel'</span>);</span><br><span class="line"></span><br><span class="line">rollup.rollup(&#123;</span><br><span class="line">  <span class="comment">// å…¥å£æ–‡ä»¶</span></span><br><span class="line">  entry: <span class="string">'src/index.js'</span>,</span><br><span class="line">  plugins: [</span><br><span class="line">    babel()</span><br><span class="line">  ]</span><br><span class="line">&#125;).then( <span class="function"><span class="keyword">function</span> (<span class="params"> bundle </span>) </span>&#123;</span><br><span class="line">  <span class="comment">// CommonJS</span></span><br><span class="line">  bundle.write(&#123;</span><br><span class="line">    format: <span class="string">'cjs'</span>,</span><br><span class="line">    dest: <span class="string">'dest/index.js'</span></span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="comment">// UMD</span></span><br><span class="line">  bundle.write(&#123;</span><br><span class="line">    format: <span class="string">'umd'</span>,</span><br><span class="line">    moduleName: <span class="string">'SillyDatetime'</span>,</span><br><span class="line">    dest: <span class="string">'dest/index.umd.js'</span></span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>å‘½ä»¤è¡Œè¿è¡Œè¿™ä¸ªæ–‡ä»¶ <code>node rollup.js</code> å³å¯ç”Ÿæˆ <code>dest/index.js</code> å’Œ <code>dest/index.umd.js</code>ã€‚å¦‚æœå¸Œæœ›æ–¹ä¾¿æ”¹ç»„ä»¶è¢«åˆ«çš„é¡¹ç›®è°ƒç”¨ï¼Œå°±éœ€è¿›è¡Œä¸€äº›é…ç½®å£°æ˜ï¼ŒåŒ…æ‹¬ <em>package.json</em></p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"main"</span>: <span class="string">"dest/index.js"</span>,</span><br><span class="line">  <span class="attr">"jsnext:main"</span>: <span class="string">"src/index.js"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å’Œ <em>bower.json</em>ï¼š</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"main"</span>: <span class="string">"dest/index.umd.js"</span>,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç„¶è€Œè¿™å¹¶ä¸æ˜¯ Rollup æœ€å¼ºå¤§åŠŸèƒ½çš„ä½“ç°ï¼Œå› ä¸ºè¿™çœ‹ä¸å‡º Tree-shakingã€‚</p>
<h2><span id="tree-shaking">Tree-shaking</span></h2><blockquote>
<p>eliminate unused library code</p>
</blockquote>
<p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ° <a href="https://github.com/csbun/silly-datetime" target="_blank" rel="noopener">silly-datetime</a> æä¾›äº† <code>format</code>ã€<code>fromNow</code> å’Œ <code>locate</code> 3 ä¸ªæ–¹æ³•ï¼Œç„¶è€Œå¤§éƒ¨åˆ†æ—¶é—´æˆ‘ä»¬åªéœ€è¦ç”¨åˆ°å…¶ä¸­çš„ä¸€ä¸ªï¼Œå¦‚æœå°†è¿™ä¹ˆä¸€ä¸ªå®Œæ•´çš„æ–‡ä»¶ bundle èµ·æ¥ï¼Œå°†æœ‰å¾ˆå¤šæ— ç”¨çš„ä»£ç ã€‚</p>
<p>ä¸‹é¢ï¼Œæˆ‘ä»¬å°†åˆ›å»ºè¿™ä¹ˆä¸€ä¸ªç¤ºä¾‹è¯´æ˜æƒ…å†µï¼Œé¦–å…ˆæˆ‘ä»¬æ–°å»ºä¸€ä¸ªé¡¹ç›®ï¼Œå¼•ç”¨ä¸Šè¿°çš„ <a href="https://github.com/csbun/silly-datetime" target="_blank" rel="noopener">silly-datetime</a>:</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">npm init</span><br><span class="line">npm i silly-datetime --save</span><br><span class="line">touch index.js</span><br></pre></td></tr></table></figure>
<p>ç„¶åæˆ‘ä»¬ä¿®æ”¹ <em>index.js</em> ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">'use strict'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123; format &#125; <span class="keyword">from</span> <span class="string">'silly-datetime'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> getStr = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> format(<span class="keyword">new</span> <span class="built_in">Date</span>());</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> formatedDate = getStr();</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">`now is <span class="subst">$&#123;formatedDate&#125;</span>`</span>);</span><br></pre></td></tr></table></figure>
<h3><span id="browserify">Browserify</span></h3><p>æˆ‘ä»¬å…ˆè¯•è¯• Browserifyï¼Œä½†åœ¨è¿™ä¹‹å‰æˆ‘ä»¬éœ€è¦æ·»åŠ ä¸€ä¸‹ babel æ’ä»¶ï¼š</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i babelify babel-preset-es2015 --save-dev</span><br></pre></td></tr></table></figure>
<p>å¹¶é…ç½®ä¸€ä¸‹ <em>package.json</em></p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"browserify"</span>: &#123;</span><br><span class="line">    <span class="attr">"transform"</span>: [</span><br><span class="line">      [ <span class="string">"babelify"</span>, &#123; <span class="attr">"presets"</span>: [ <span class="string">"es2015"</span> ] &#125; ]</span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿è¡Œ <code>browserify index.js &gt; dest/bundle.browserify.js</code> åæˆ‘ä»¬å¯ä»¥çœ‹åˆ° bundle æ–‡ä»¶ç”¨çš„æ˜¯ä¹‹å‰å·²ç»ç”¨ rollup ç”Ÿæˆçš„ <code>node_modules/silly-datetime/dest/index.js</code>ã€‚äºæ˜¯æˆ‘ä»¬å°†æºç å¤åˆ¶å‡ºæ¥</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cp node_modules/silly-datetime/src/index.js lib/silly-datetime.es2015.js</span><br></pre></td></tr></table></figure>
<p>å¹¶æ”¹ä¸€ä¸‹ <em>index.js</em>ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; format &#125; <span class="keyword">from</span> <span class="string">'./lib/silly-datetime.es2015.js'</span>;</span><br></pre></td></tr></table></figure>
<p>å†æ¥ä¸€æ¬¡å¦‚ä½•ï¼Ÿçœ‹åˆ° bundle æ–‡ä»¶å·²ç»å°† ES2015 è½¬æˆäº† CommonJS çš„ ES5:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ...</span></span><br><span class="line">&#123;<span class="number">1</span>:[<span class="function"><span class="keyword">function</span>(<span class="params">require,module,exports</span>)</span>&#123;</span><br><span class="line"><span class="meta">'use strict'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> _datetimeEs = <span class="built_in">require</span>(<span class="string">'./lib/silly-datetime.es2015.js'</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> getStr = <span class="function"><span class="keyword">function</span> <span class="title">getStr</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> (<span class="number">0</span>, _datetimeEs.format)(<span class="keyword">new</span> <span class="built_in">Date</span>());</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> formatedDate = getStr();</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'now is '</span> + formatedDate);</span><br><span class="line"></span><br><span class="line">&#125;,&#123;<span class="string">"./lib/silly-datetime.es2015.js"</span>:<span class="number">2</span>&#125;],<span class="number">2</span>:[<span class="function"><span class="keyword">function</span>(<span class="params">require,module,exports</span>)</span>&#123;</span><br><span class="line"><span class="meta">'use strict'</span>;</span><br><span class="line"><span class="comment">/* æ³¨æ„è¿™é‡Œ */</span></span><br><span class="line"><span class="built_in">Object</span>.defineProperty(exports, <span class="string">"__esModule"</span>, &#123;</span><br><span class="line">  value: <span class="literal">true</span></span><br><span class="line">&#125;);</span><br><span class="line">exports.format = format;</span><br><span class="line">exports.locate = locate;</span><br><span class="line">exports.fromNow = fromNow;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ...</span></span><br><span class="line">&#125;]&#125;</span><br></pre></td></tr></table></figure>
<p>æ˜æ˜¾è¿™é‡Œçš„ <code>locate</code> å’Œ <code>fromNow</code> æ˜¯ä¸ä¼šè¢«æ¶ˆç­çš„ï¼Œå³ä½¿ä½¿ç”¨äº† <a href="https://github.com/mishoo/UglifyJS" target="_blank" rel="noopener">UglifyJS</a>ã€‚å¦å¤–ï¼Œç»†å¿ƒçš„åŒå­¦ä¼šå‘ç°è¿™æ®µä»£ç ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(<span class="number">0</span>, _datetimeEs.format)(<span class="keyword">new</span> <span class="built_in">Date</span>());</span><br></pre></td></tr></table></figure>
<p>ä¸ºä»€ä¹ˆä¼šè¿™æ ·ï¼Ÿçœ‹ä¸€ä¸‹ <a href="http://rauschma.de/" target="_blank" rel="noopener">Dr. Axel Rauschmayer</a> çš„ <a href="http://www.2ality.com/2015/12/references.html" target="_blank" rel="noopener">Why is (0,obj.prop)() not a method call?</a>ã€‚</p>
<h3><span id="rollup">Rollup</span></h3><p>æˆ‘ä»¬çœ‹çœ‹ Rollup çš„è¡¨ç°ï¼Œä¸€æ ·è¦æ·»åŠ  babel æ’ä»¶ï¼š</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i rollup-plugin-babel babel-preset-es2015-rollup --save-dev</span><br></pre></td></tr></table></figure>
<p>å¹¶é…ç½®ä¸€ä¸‹ <em>rollup.config.js</em>ï¼ˆè¯¦è§ <a href="https://github.com/rollup/rollup/wiki/Command-Line-Interface" target="_blank" rel="noopener">Command-Line-Interface</a>ï¼‰ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> babel <span class="keyword">from</span> <span class="string">'rollup-plugin-babel'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  entry: <span class="string">'index.js'</span>,</span><br><span class="line">  dest: <span class="string">'dest/bundle.rollup.js'</span>,</span><br><span class="line">  format: <span class="string">'umd'</span>,</span><br><span class="line">  plugins: [ babel() ]</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>å’Œ <em>.babelrc</em>ï¼ˆè¯¦è§ <a href="https://github.com/rollup/rollup-plugin-babel" target="_blank" rel="noopener">rollup-plugin-babel</a>ï¼‰ï¼š</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"presets"</span>: [ <span class="string">"es2015-rollup"</span> ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿™ä¸ªæ—¶å€™æ‰§è¡Œ <code>rollup -c rollup.config.js</code> æˆ‘ä»¬èƒ½çœ‹åˆ°ç”Ÿæˆçš„ä»£ç é‡éå¸¸çš„å°‘ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">(<span class="function"><span class="keyword">function</span> (<span class="params">global, factory</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">typeof</span> exports === <span class="string">'object'</span> &amp;&amp; <span class="keyword">typeof</span> <span class="built_in">module</span> !== <span class="string">'undefined'</span> ? factory() :</span><br><span class="line">  <span class="keyword">typeof</span> define === <span class="string">'function'</span> &amp;&amp; define.amd ? define(factory) :</span><br><span class="line">  factory();</span><br><span class="line">&#125;(<span class="keyword">this</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123; <span class="string">'use strict'</span>;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">getDateObject</span>(<span class="params">datetime</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">format</span>(<span class="params">datetime, formatStr</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// ... è¿™é‡Œä½¿ç”¨äº† getDateObject()</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// import &#123; format &#125; from 'silly-datetime';</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> getStr = <span class="function"><span class="keyword">function</span> <span class="title">getStr</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> format(<span class="keyword">new</span> <span class="built_in">Date</span>());</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> formatedDate = getStr();</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'now is '</span> + formatedDate);</span><br><span class="line"></span><br><span class="line">&#125;));</span><br></pre></td></tr></table></figure>
<p>å¯ä»¥çœ‹å‡ºï¼Œå®Œå…¨æ²¡æœ‰å¤šä½™çš„ä»£ç ï¼Œè€Œä¸”ç”šè‡³æ¨¡å—éƒ½æ²¡æœ‰äº†ï¼Œçœ‹ä¸åˆ°ä»»ä½•çš„ <code>require</code> å®šä¹‰ï¼Œ<code>import</code> çš„å†…å®¹ç›´æ¥ inline åˆ°ä¸»æ–‡æ¡£ä¸­äº†ã€‚è¿™å›æˆ‘å°±å¥½å¥‡äº†ï¼Œå¦‚æœä¾èµ–å…³ç³»å†å¤æ‚ä¸€ç‚¹ï¼Œè¿˜ä¼šæ˜¯æ€æ ·å‘¢ï¼Ÿäºæ˜¯æˆ‘é€ äº†ä¸€ä¸ªç¨å¾®å¤æ‚ä¸€ç‚¹çš„ <a href="https://github.com/csbun/tree-shaking-demo/tree/master/rollup" target="_blank" rel="noopener">ä¾‹å­</a>ï¼Œç»“æœè¿˜æ˜¯ <a href="https://github.com/csbun/tree-shaking-demo/blob/master/rollup/bundle.js" target="_blank" rel="noopener">inline åˆ°ä¸€èµ·äº†</a>ï¼</p>
<p>ä½†æ˜¯ï¼Œä¸Šé¢è¿™ä¸¤ä¸ªä¾‹å­éƒ½æœ‰ä¸€ä¸ªé—®é¢˜ï¼Œä¸ºå˜›æˆ‘éœ€è¦å°†æºç å¤åˆ¶å‡ºæ¥ï¼Ÿéš¾é“ä¸èƒ½ç›´æ¥ import ï¼Ÿ</p>
<blockquote>
<p>Yes, we can!</p>
</blockquote>
<p>æ–‡ç« æœ€ä¸Šé¢æˆ‘ä»¬çš„ç»„ä»¶å·²ç»å®šä¹‰äº† <code>&quot;jsnext:main&quot;: &quot;src/index.js&quot;</code>ï¼Œæ‰€ä»¥åœ¨ä½¿ç”¨ rollup çš„è¿™ä¸ª <a href="https://github.com/rollup/rollup/wiki/jsnext:main" target="_blank" rel="noopener">è¯­æ³•ç³–</a> åï¼Œæˆ‘ä»¬å°±èƒ½ç›´æ¥å°†è¯¥ç»„ä»¶ import è¿›æ¥ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; format &#125; <span class="keyword">from</span> <span class="string">'silly-datetime'</span>;</span><br></pre></td></tr></table></figure>
<p>ä½†æ˜¯è¿™æ ·çš„ bundle æ–‡ä»¶ä¸ä¼šåŒ…å« npm package çš„æºç ï¼Œç´§æ€¥åªæ˜¯è½¬åŒ–æˆ <code>var format = require(&#39;silly-datetime);</code>ï¼Œæ‰€ä»¥æˆ‘ä»¬è¿˜éœ€è¦å®‰è£…ä¸€ä¸ªæ’ä»¶ï¼š</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install --save-dev rollup-plugin-npm</span><br></pre></td></tr></table></figure>
<p>åŠ åˆ°é…ç½®é‡Œ <em>rollup.config.js</em> é¢å»ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> babel <span class="keyword">from</span> <span class="string">'rollup-plugin-babel'</span>;</span><br><span class="line"><span class="keyword">import</span> npm <span class="keyword">from</span> <span class="string">'rollup-plugin-npm'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  entry: <span class="string">'index.js'</span>,</span><br><span class="line">  dest: <span class="string">'dest/bundle.rollup.js'</span>,</span><br><span class="line">  format: <span class="string">'umd'</span>,</span><br><span class="line">  plugins: [</span><br><span class="line">    babel(),</span><br><span class="line">    npm(&#123;</span><br><span class="line">      jsnext: <span class="literal">true</span>,</span><br><span class="line">    &#125;)</span><br><span class="line">  ]</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>å‡ºæ¥çš„ bundle æ–‡ä»¶å°±å’Œä¸Šé¢çš„æ•ˆæœä¸€æ ·äº†~</p>
<h3><span id="webpack-2">webpack 2</span></h3><p>ç»ˆäºåˆ°è¿™ä¸€æ­¥äº†ï¼Œå°±æ˜¯å› ä¸ºçœ‹äº† Axel çš„è¿™ç¯‡ <a href="http://www.2ality.com/2015/12/webpack-tree-shaking.html" target="_blank" rel="noopener">Tree-shaking with webpack 2 and Babel 6</a> æ‰æœ‰äº†è¿™ç¯‡æ–‡ç« ã€‚</p>
<p><a href="https://webpack.github.io/" target="_blank" rel="noopener">webpack</a> 2 ç›®å‰è¿˜æ˜¯ beta ç‰ˆæœ¬ï¼Œä½†æ˜¯æˆ‘ä»¬è¿˜æ˜¯å¯ä»¥ä½¿ç”¨çš„ã€‚æŒ‰ç…§åšå£«çš„è¯´æ³•ï¼Œå› ä¸º <a href="https://www.npmjs.com/package/babel-preset-es2015" target="_blank" rel="noopener">babel-preset-es2015</a> <a href="https://github.com/babel/babel/blob/7b369674163e40241ff41e63458c8d98298e942a/packages/babel-preset-es2015/package.json" target="_blank" rel="noopener">åŒ…å«</a> äº† <a href="https://www.npmjs.com/package/babel-plugin-transform-es2015-modules-commonjs" target="_blank" rel="noopener">babel-plugin-transform-es2015-modules-commonjs</a>ï¼Œè€Œ commonjs çš„æ‰“åŒ…æ–¹å¼æ³¨å®šä¸èƒ½å®ç°æˆ‘ä»¬çš„ Tree-shaking å¤§è®¡ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸èƒ½ç›´æ¥ä½¿ç”¨ babel-preset-es2015ï¼Œè€Œæ˜¯ç›´æ¥ä½¿ç”¨ä»–æ‰€åŒ…å«çš„é™¤äº† commonjs ä»¥å¤–çš„å…¶ä»–å…¨éƒ¨ä¾èµ– pluginã€‚</p>
<p>è¿™å›è¦å®‰è£…çš„ä¸œè¥¿å°±å¤šäº†ï¼Œå¦‚æœæ˜¯ npm2 çš„å°±åœ¨ <em>package.json</em> é‡Œç›´æ¥æ·»åŠ  devDependences å¥½äº†ï¼š</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"devDependencies"</span>: &#123;</span><br><span class="line">    <span class="attr">"webpack"</span>: <span class="string">"^2.0.2-beta"</span>,</span><br><span class="line">    <span class="attr">"babel-loader"</span>: <span class="string">"^6.2.0"</span>,</span><br><span class="line">    <span class="attr">"babel-plugin-transform-es2015-template-literals"</span>: <span class="string">"^6.3.13"</span>,</span><br><span class="line">    <span class="attr">"babel-plugin-transform-es2015-literals"</span>: <span class="string">"^6.3.13"</span>,</span><br><span class="line">    <span class="attr">"babel-plugin-transform-es2015-function-name"</span>: <span class="string">"^6.3.13"</span>,</span><br><span class="line">    <span class="attr">"babel-plugin-transform-es2015-arrow-functions"</span>: <span class="string">"^6.3.13"</span>,</span><br><span class="line">    <span class="attr">"babel-plugin-transform-es2015-block-scoped-functions"</span>: <span class="string">"^6.3.13"</span>,</span><br><span class="line">    <span class="attr">"babel-plugin-transform-es2015-classes"</span>: <span class="string">"^6.3.13"</span>,</span><br><span class="line">    <span class="attr">"babel-plugin-transform-es2015-object-super"</span>: <span class="string">"^6.3.13"</span>,</span><br><span class="line">    <span class="attr">"babel-plugin-transform-es2015-shorthand-properties"</span>: <span class="string">"^6.3.13"</span>,</span><br><span class="line">    <span class="attr">"babel-plugin-transform-es2015-computed-properties"</span>: <span class="string">"^6.3.13"</span>,</span><br><span class="line">    <span class="attr">"babel-plugin-transform-es2015-for-of"</span>: <span class="string">"^6.3.13"</span>,</span><br><span class="line">    <span class="attr">"babel-plugin-transform-es2015-sticky-regex"</span>: <span class="string">"^6.3.13"</span>,</span><br><span class="line">    <span class="attr">"babel-plugin-transform-es2015-unicode-regex"</span>: <span class="string">"^6.3.13"</span>,</span><br><span class="line">    <span class="attr">"babel-plugin-check-es2015-constants"</span>: <span class="string">"^6.3.13"</span>,</span><br><span class="line">    <span class="attr">"babel-plugin-transform-es2015-spread"</span>: <span class="string">"^6.3.13"</span>,</span><br><span class="line">    <span class="attr">"babel-plugin-transform-es2015-parameters"</span>: <span class="string">"^6.3.13"</span>,</span><br><span class="line">    <span class="attr">"babel-plugin-transform-es2015-destructuring"</span>: <span class="string">"^6.3.13"</span>,</span><br><span class="line">    <span class="attr">"babel-plugin-transform-es2015-block-scoping"</span>: <span class="string">"^6.3.13"</span>,</span><br><span class="line">    <span class="attr">"babel-plugin-transform-es2015-typeof-symbol"</span>: <span class="string">"^6.3.13"</span>,</span><br><span class="line">    <span class="attr">"babel-plugin-transform-es2015-modules-commonjs"</span>: <span class="string">"^6.3.13"</span>,</span><br><span class="line">    <span class="attr">"babel-plugin-transform-regenerator"</span>: <span class="string">"^6.3.13"</span>,</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>npm i</code> æ—¶ä¼šè¯´ peer dependency å†²çªï¼Œè¯·å¿½ç•¥ä¹‹ï¼Œå› ä¸ºæˆ‘ä»¬åœ¨ç”¨ beta çš„ webpackã€‚ç„¶åå†™ä¸€ä¸‹æˆ‘æœ€ä¸å–œæ¬¢çš„ <em>webpack.config.js</em>ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>);</span><br><span class="line"><span class="keyword">var</span> webpack = <span class="built_in">require</span>(<span class="string">'webpack'</span>); <span class="comment">// webpack 2</span></span><br><span class="line"><span class="keyword">var</span> dir = __dirname;</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    entry: path.join(dir, <span class="string">'index.js'</span>),</span><br><span class="line">    output: &#123;</span><br><span class="line">        path: path.join(dir, <span class="string">'dest'</span>),</span><br><span class="line">        filename: <span class="string">'webpack.bundle.js'</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="built_in">module</span>: &#123;</span><br><span class="line">        loaders: [&#123;</span><br><span class="line">            loader: <span class="string">'babel-loader'</span>,</span><br><span class="line">            test: dir,</span><br><span class="line">            query: &#123;</span><br><span class="line">                <span class="comment">// presets: ['es2015'],</span></span><br><span class="line"></span><br><span class="line">                <span class="comment">// All of the plugins of babel-preset-es2015,</span></span><br><span class="line">                <span class="comment">// minus babel-plugin-transform-es2015-modules-commonjs</span></span><br><span class="line">                plugins: [</span><br><span class="line">                    <span class="string">'transform-es2015-template-literals'</span>,</span><br><span class="line">                    <span class="string">'transform-es2015-literals'</span>,</span><br><span class="line">                    <span class="string">'transform-es2015-function-name'</span>,</span><br><span class="line">                    <span class="string">'transform-es2015-arrow-functions'</span>,</span><br><span class="line">                    <span class="string">'transform-es2015-block-scoped-functions'</span>,</span><br><span class="line">                    <span class="string">'transform-es2015-classes'</span>,</span><br><span class="line">                    <span class="string">'transform-es2015-object-super'</span>,</span><br><span class="line">                    <span class="string">'transform-es2015-shorthand-properties'</span>,</span><br><span class="line">                    <span class="string">'transform-es2015-computed-properties'</span>,</span><br><span class="line">                    <span class="string">'transform-es2015-for-of'</span>,</span><br><span class="line">                    <span class="string">'transform-es2015-sticky-regex'</span>,</span><br><span class="line">                    <span class="string">'transform-es2015-unicode-regex'</span>,</span><br><span class="line">                    <span class="string">'check-es2015-constants'</span>,</span><br><span class="line">                    <span class="string">'transform-es2015-spread'</span>,</span><br><span class="line">                    <span class="string">'transform-es2015-parameters'</span>,</span><br><span class="line">                    <span class="string">'transform-es2015-destructuring'</span>,</span><br><span class="line">                    <span class="string">'transform-es2015-block-scoping'</span>,</span><br><span class="line">                    <span class="string">'transform-es2015-typeof-symbol'</span>,</span><br><span class="line">                    [<span class="string">'transform-regenerator'</span>, &#123; <span class="attr">async</span>: <span class="literal">false</span>, <span class="attr">asyncGenerators</span>: <span class="literal">false</span> &#125;],</span><br><span class="line">                ]</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;]</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    plugins: [</span><br><span class="line">        <span class="comment">// Avoid publishing files when compilation fails</span></span><br><span class="line">        <span class="keyword">new</span> webpack.NoErrorsPlugin()</span><br><span class="line">    ],</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>å› ä¸º webpack ä¹Ÿä¸è®¤è¯† <code>jsnext:main</code>ï¼Œæˆ‘ä»¬è¿˜æ˜¯éœ€è¦ç›´æ¥ import ES2015 çš„æºç ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; format &#125; <span class="keyword">from</span> <span class="string">'./lib/silly-datetime.es2015.js'</span>;</span><br></pre></td></tr></table></figure>
<p>è¿è¡Œ <code>webpack</code> çœ‹çœ‹ <em>dest/webpack.bundle.js</em>ï¼ˆæˆ‘ç¨å¾®åˆ å‡å¹¶æ ¼å¼åŒ–äº†ä¸€ä¸‹ä»£ç ï¼‰ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/******/</span> (<span class="function"><span class="keyword">function</span>(<span class="params">modules</span>) </span>&#123; <span class="comment">// webpackBootstrap</span></span><br><span class="line">      <span class="comment">// ...</span></span><br><span class="line"><span class="comment">/******/</span> &#125;)([</span><br><span class="line"><span class="comment">/* 0 */</span></span><br><span class="line"><span class="comment">/***/</span> <span class="function"><span class="keyword">function</span>(<span class="params">module, exports, __webpack_require__</span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/* harmony export */</span> exports[<span class="string">"format"</span>] = format;</span><br><span class="line">  <span class="comment">/* unused harmony export locate */</span>;</span><br><span class="line">  <span class="comment">/* unused harmony export fromNow */</span>;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">getDateObject</span>(<span class="params">datetime</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">format</span>(<span class="params">datetime, formatStr</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// ... è¿™é‡Œä½¿ç”¨äº† getDateObject()</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">locate</span>(<span class="params">arg</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">fromNow</span>(<span class="params">datetime</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/***/</span> &#125;,</span><br><span class="line"><span class="comment">/* 1 */</span></span><br><span class="line"><span class="comment">/***/</span> <span class="function"><span class="keyword">function</span>(<span class="params">module, exports, __webpack_require__</span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/* harmony import */</span> <span class="keyword">var</span> __WEBPACK_IMPORTED_MODULE_0__lib_silly_datetime_es2015_js__ = __webpack_require__(<span class="number">0</span>);</span><br><span class="line"><span class="meta">  'use strict'</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> getStr = <span class="function"><span class="keyword">function</span> <span class="title">getStr</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="comment">/* harmony import */</span> __WEBPACK_IMPORTED_MODULE_0__lib_silly_datetime_es2015_js__[<span class="string">"format"</span>](<span class="keyword">new</span> <span class="built_in">Date</span>());</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> formatedDate = getStr();</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'now is '</span> + formatedDate);</span><br><span class="line"></span><br><span class="line"><span class="comment">/***/</span> &#125;</span><br><span class="line"><span class="comment">/******/</span> ]);</span><br></pre></td></tr></table></figure>
<p>ä»ç¬¬ 7 è‡³ 9 è¡Œå¯ä»¥çœ‹åˆ°ï¼Œ <code>locate</code> å’Œ <code>fromNow</code> å¹¶æ²¡æœ‰è¢« exportï¼Œè™½ç„¶ä¸‹æ–¹è¿˜èƒ½çœ‹åˆ°è¿™ä¸¤ä¸ªæ–¹æ³•çš„å£°æ˜ï¼Œä½†æ˜¯åªè¦ç»è¿‡ UglifyJsï¼Œè¿™ä¸¤ä¸ªæ–¹æ³•å¿…ç„¶ <a href="http://www.2ality.com/2015/12/webpack-tree-shaking.html#how_webpack_2_eliminates_unused_exports" target="_blank" rel="noopener">ä¼šè¢«æ¶ˆé™¤</a>ï¼š</p>
<blockquote>
<h5><span id="how-webpack-2-eliminates-unused-exports">How webpack 2 eliminates unused exports</span></h5><p>webpack 2, a new version that is in beta, eliminates unused exports in two steps:</p>
</blockquote>
<blockquote>
<ul>
<li>First, all ES6 module files are combined into a single bundle file. In that file, exports that were not imported anywhere are not exported, anymore.</li>
</ul>
</blockquote>
<blockquote>
<ul>
<li>Second, the bundle is minified, while eliminating dead code. Therefore, entities that are neither exported nor used inside their modules do not appear in the minified bundle. Without the first step, dead code elimination would never remove exports (registering an export keeps it alive).</li>
</ul>
</blockquote>
<p>å¯ä»¥è¿è¡Œ <code>webpack --optimize-minimize</code> çœ‹åˆ°æ‰§è¡Œæ•ˆæœï¼š</p>
<figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">Hash:</span> b8357dea1720f84e6a76</span><br><span class="line"><span class="symbol">Version:</span> webpack <span class="number">2.0</span>.<span class="number">2</span>-beta</span><br><span class="line"><span class="symbol">Time:</span> <span class="number">9812</span>ms</span><br><span class="line">            Asset       Size  Chunks             Chunk Names</span><br><span class="line">webpack.bundle.js  <span class="number">935</span> bytes       <span class="number">0</span>  [emitted]  main</span><br><span class="line">    + <span class="number">2</span> hidden modules</span><br><span class="line"></span><br><span class="line">WARNING in webpack.bundle.js from UglifyJs</span><br><span class="line">Dropping unused function locate [./<span class="class"><span class="keyword">lib</span>/<span class="title">silly</span>-<span class="title">datetime</span>.<span class="title">es2015</span>.<span class="title">js</span>:84,16]</span></span><br><span class="line">Dropping unused function fromNow [./<span class="class"><span class="keyword">lib</span>/<span class="title">silly</span>-<span class="title">datetime</span>.<span class="title">es2015</span>.<span class="title">js</span>:120,16]</span></span><br><span class="line">Dropping unused variable LOCALE_EN [./<span class="class"><span class="keyword">lib</span>/<span class="title">silly</span>-<span class="title">datetime</span>.<span class="title">es2015</span>.<span class="title">js</span>:55,6]</span></span><br><span class="line">Dropping unused variable LOCALE_ZH_CN [./<span class="class"><span class="keyword">lib</span>/<span class="title">silly</span>-<span class="title">datetime</span>.<span class="title">es2015</span>.<span class="title">js</span>:66,6]</span></span><br><span class="line">Dropping unused variable _curentLocale [./<span class="class"><span class="keyword">lib</span>/<span class="title">silly</span>-<span class="title">datetime</span>.<span class="title">es2015</span>.<span class="title">js</span>:77,4]</span></span><br><span class="line">Dropping unused variable DET_STD [./<span class="class"><span class="keyword">lib</span>/<span class="title">silly</span>-<span class="title">datetime</span></span></span><br></pre></td></tr></table></figure>
<p>æ–‡ä»¶ä½“ç§¯ç”±åŸæ¥çš„ 5.68 kB ä¸‹é™åˆ°äº† 935 bytesï¼ˆå½“ç„¶è¿™é‡Œä¹Ÿæœ‰ UglifyJs çš„åŠŸåŠ³ï¼‰ã€‚</p>
<h3><span id="å†å›åˆ°-browserify">å†å›åˆ° Browserify</span></h3><p>å—ä¸Šé¢çš„å¯å‘ï¼Œåœ¨ Browserify é‡Œé¢ä¹Ÿèƒ½è¿™æ ·éº½ï¼Ÿæˆ‘æŠŠ <em>package.json</em> é…ç½®æˆè¿™æ ·ï¼š</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"browserify"</span>: &#123;</span><br><span class="line">    <span class="attr">"transform"</span>: [</span><br><span class="line">      [ <span class="string">"babelify"</span>, &#123;</span><br><span class="line">        <span class="attr">"plugins"</span>: [</span><br><span class="line">          <span class="string">"transform-es2015-template-literals"</span>,</span><br><span class="line">          <span class="string">"transform-es2015-literals"</span>,</span><br><span class="line">          <span class="string">"transform-es2015-function-name"</span>,</span><br><span class="line">          <span class="string">"transform-es2015-arrow-functions"</span>,</span><br><span class="line">          <span class="string">"transform-es2015-block-scoped-functions"</span>,</span><br><span class="line">          <span class="string">"transform-es2015-classes"</span>,</span><br><span class="line">          <span class="string">"transform-es2015-object-super"</span>,</span><br><span class="line">          <span class="string">"transform-es2015-shorthand-properties"</span>,</span><br><span class="line">          <span class="string">"transform-es2015-computed-properties"</span>,</span><br><span class="line">          <span class="string">"transform-es2015-for-of"</span>,</span><br><span class="line">          <span class="string">"transform-es2015-sticky-regex"</span>,</span><br><span class="line">          <span class="string">"transform-es2015-unicode-regex"</span>,</span><br><span class="line">          <span class="string">"check-es2015-constants"</span>,</span><br><span class="line">          <span class="string">"transform-es2015-spread"</span>,</span><br><span class="line">          <span class="string">"transform-es2015-parameters"</span>,</span><br><span class="line">          <span class="string">"transform-es2015-destructuring"</span>,</span><br><span class="line">          <span class="string">"transform-es2015-block-scoping"</span>,</span><br><span class="line">          <span class="string">"transform-es2015-typeof-symbol"</span>,</span><br><span class="line">          [<span class="string">"transform-regenerator"</span>, &#123; <span class="attr">"async"</span>: <span class="literal">false</span>, <span class="attr">"asyncGenerators"</span>: <span class="literal">false</span> &#125;]</span><br><span class="line">        ]</span><br><span class="line">      &#125; ]</span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å†è¿è¡Œ <code>browserify index.js &gt; dest/bundle.browserify.js</code>ï¼Œç»“æœä»¥å¤±è´¥å‘Šç»ˆâ€¦<br>æ²¡æœ‰ commonjsï¼Œbrowserify åº”è¯¥è¿˜æ˜¯å¹²ä¸æ¥çš„ï¼Œå¦‚æœæœ‰æˆåŠŸçš„ç«¥é‹éº»çƒ¦å‘Šè¯‰æˆ‘æ€ä¹ˆç ´ã€‚</p>
<h2><span id="ç¢ç¢å¿µ">ç¢ç¢å¿µ</span></h2><p>æœ¬æ–‡ç‰¹åˆ«æ˜¯ webpack ä¸€èŠ‚ï¼Œå‚(chao)è€ƒ(xi) <a href="http://www.2ality.com/2015/12/webpack-tree-shaking.html" target="_blank" rel="noopener">Tree-shaking with webpack 2 and Babel 6</a>ã€‚ä¸Šé¢å¤§éƒ¨åˆ†æºç å¯ä»¥åœ¨æˆ‘çš„ GitHub ä¸Šé¢ <a href="https://github.com/csbun/tree-shaking-demo" target="_blank" rel="noopener">æ‰¾åˆ°</a>ã€‚</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://csbun.github.io/blog/2015/12/tree-shaking-es2015/" data-id="ckclwh8uk001n8plw53nes0dm" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog/tags/Browserify/">Browserify</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog/tags/ES2015/">ES2015</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog/tags/Rollup/">Rollup</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog/tags/webpack/">webpack</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/blog/2016/01/modules/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          Modules in CommonJS and ES2015
        
      </div>
    </a>
  
  
    <a href="/blog/2015/12/starting-react-native-with-android/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">åœ¨ Android ä¸Šå¼€å§‹ä½¿ç”¨ React Native</div>
    </a>
  
</nav>


  
</article>


  <section id="comments"></section>

</section>
      
        <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">tag cloud</h3>
    <div class="widget tagcloud">
      <a href="/blog/tags/Ajax/" style="font-size: 10px;">Ajax</a> <a href="/blog/tags/Android/" style="font-size: 10px;">Android</a> <a href="/blog/tags/Angular/" style="font-size: 20px;">Angular</a> <a href="/blog/tags/Browserify/" style="font-size: 13.33px;">Browserify</a> <a href="/blog/tags/Chrome/" style="font-size: 10px;">Chrome</a> <a href="/blog/tags/CommonJS/" style="font-size: 13.33px;">CommonJS</a> <a href="/blog/tags/DOM/" style="font-size: 10px;">DOM</a> <a href="/blog/tags/Docker/" style="font-size: 16.67px;">Docker</a> <a href="/blog/tags/ES2015/" style="font-size: 13.33px;">ES2015</a> <a href="/blog/tags/Filter/" style="font-size: 10px;">Filter</a> <a href="/blog/tags/Flux/" style="font-size: 13.33px;">Flux</a> <a href="/blog/tags/Fluxxor/" style="font-size: 10px;">Fluxxor</a> <a href="/blog/tags/Headless/" style="font-size: 10px;">Headless</a> <a href="/blog/tags/JSON/" style="font-size: 10px;">JSON</a> <a href="/blog/tags/Java/" style="font-size: 10px;">Java</a> <a href="/blog/tags/Karma/" style="font-size: 10px;">Karma</a> <a href="/blog/tags/Meteor/" style="font-size: 10px;">Meteor</a> <a href="/blog/tags/Mutation-Observer/" style="font-size: 10px;">Mutation Observer</a> <a href="/blog/tags/NW-js/" style="font-size: 10px;">NW.js</a> <a href="/blog/tags/Native/" style="font-size: 10px;">Native</a> <a href="/blog/tags/Node/" style="font-size: 16.67px;">Node</a> <a href="/blog/tags/PWA/" style="font-size: 10px;">PWA</a> <a href="/blog/tags/Preact/" style="font-size: 13.33px;">Preact</a> <a href="/blog/tags/Puppeteer/" style="font-size: 10px;">Puppeteer</a> <a href="/blog/tags/React/" style="font-size: 20px;">React</a> <a href="/blog/tags/RequireJS/" style="font-size: 10px;">RequireJS</a> <a href="/blog/tags/Rollup/" style="font-size: 10px;">Rollup</a> <a href="/blog/tags/Selenium/" style="font-size: 13.33px;">Selenium</a> <a href="/blog/tags/ServiceWorker/" style="font-size: 13.33px;">ServiceWorker</a> <a href="/blog/tags/Stateful/" style="font-size: 10px;">Stateful</a> <a href="/blog/tags/Storybook/" style="font-size: 10px;">Storybook</a> <a href="/blog/tags/Vue/" style="font-size: 10px;">Vue</a> <a href="/blog/tags/Workbox/" style="font-size: 10px;">Workbox</a> <a href="/blog/tags/async/" style="font-size: 13.33px;">async</a> <a href="/blog/tags/ci/" style="font-size: 16.67px;">ci</a> <a href="/blog/tags/contentEditable/" style="font-size: 10px;">contentEditable</a> <a href="/blog/tags/coverage/" style="font-size: 10px;">coverage</a> <a href="/blog/tags/debug/" style="font-size: 10px;">debug</a> <a href="/blog/tags/deserialization/" style="font-size: 10px;">deserialization</a> <a href="/blog/tags/desktop/" style="font-size: 10px;">desktop</a> <a href="/blog/tags/events/" style="font-size: 10px;">events</a> <a href="/blog/tags/generator/" style="font-size: 10px;">generator</a> <a href="/blog/tags/google/" style="font-size: 10px;">google</a> <a href="/blog/tags/install/" style="font-size: 10px;">install</a> <a href="/blog/tags/koa/" style="font-size: 10px;">koa</a> <a href="/blog/tags/less/" style="font-size: 10px;">less</a> <a href="/blog/tags/log/" style="font-size: 10px;">log</a> <a href="/blog/tags/logo/" style="font-size: 10px;">logo</a> <a href="/blog/tags/nightmare/" style="font-size: 10px;">nightmare</a> <a href="/blog/tags/npm/" style="font-size: 10px;">npm</a> <a href="/blog/tags/performance/" style="font-size: 10px;">performance</a> <a href="/blog/tags/permissions/" style="font-size: 10px;">permissions</a> <a href="/blog/tags/publish/" style="font-size: 10px;">publish</a> <a href="/blog/tags/requestAnimationFrame/" style="font-size: 10px;">requestAnimationFrame</a> <a href="/blog/tags/requestIdleCallback/" style="font-size: 10px;">requestIdleCallback</a> <a href="/blog/tags/serialization/" style="font-size: 10px;">serialization</a> <a href="/blog/tags/ssr/" style="font-size: 10px;">ssr</a> <a href="/blog/tags/test/" style="font-size: 20px;">test</a> <a href="/blog/tags/ui/" style="font-size: 10px;">ui</a> <a href="/blog/tags/vue/" style="font-size: 10px;">vue</a> <a href="/blog/tags/webkit/" style="font-size: 10px;">webkit</a> <a href="/blog/tags/webpack/" style="font-size: 13.33px;">webpack</a> <a href="/blog/tags/weex/" style="font-size: 10px;">weex</a> <a href="/blog/tags/ç¾é£Ÿ/" style="font-size: 13.33px;">ç¾é£Ÿ</a> <a href="/blog/tags/é£åœŸäººæƒ…/" style="font-size: 10px;">é£åœŸäººæƒ…</a> <a href="/blog/tags/é£æ™¯/" style="font-size: 10px;">é£æ™¯</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2018/02/">February 2018</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2018/01/">January 2018</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2017/09/">September 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2017/08/">August 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2017/06/">June 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2017/03/">March 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2016/11/">November 2016</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2016/09/">September 2016</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2016/08/">August 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2016/04/">April 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2016/01/">January 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2015/12/">December 2015</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2015/11/">November 2015</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2015/09/">September 2015</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2015/07/">July 2015</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2015/06/">June 2015</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2015/05/">May 2015</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2015/04/">April 2015</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2015/03/">March 2015</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2015/02/">February 2015</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2014/12/">December 2014</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2014/09/">September 2014</a><span class="archive-list-count">1</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">recents</h3>
    <div class="widget">
      <ul id="recent-post" class="">
        
          <li>
            
            <div class="item-thumbnail">
              <a href="/blog/2018/02/workbox/" class="thumbnail">
  
    <span style="background-image:url(/blog/gallery/taiwan/DSC04075.JPG)" alt="Workbox å…¥é—¨" class="thumbnail-image"></span>
  
</a>
            </div>
            
            <div class="item-inner">
              <p class="item-category"></p>
              <p class="item-title"><a href="/blog/2018/02/workbox/" class="title">Workbox å…¥é—¨</a></p>
              <p class="item-date"><time datetime="2018-02-27T09:38:34.000Z" itemprop="datePublished">2018-02-27</time></p>
            </div>
          </li>
        
          <li>
            
            <div class="item-thumbnail">
              <a href="/blog/2018/01/preact-code-h/" class="thumbnail">
  
    <span style="background-image:url(/blog/gallery/taiwan/P51001-124945.jpg)" alt="Preact æºç è§£æ â€”â€” h/createElement" class="thumbnail-image"></span>
  
</a>
            </div>
            
            <div class="item-inner">
              <p class="item-category"></p>
              <p class="item-title"><a href="/blog/2018/01/preact-code-h/" class="title">Preact æºç è§£æ â€”â€” h/createElement</a></p>
              <p class="item-date"><time datetime="2018-01-25T12:04:25.000Z" itemprop="datePublished">2018-01-25</time></p>
            </div>
          </li>
        
          <li>
            
            <div class="item-thumbnail">
              <a href="/blog/2017/09/puppeteer/" class="thumbnail">
  
    <span style="background-image:url(https://github.com/csbun/thal/raw/master/media/desertious.jpg
)" alt="è¯‘æ–‡ï¼šPuppeteer ä¸ Chrome Headless â€”â€” ä»å…¥é—¨åˆ°çˆ¬è™«" class="thumbnail-image"></span>
  
</a>
            </div>
            
            <div class="item-inner">
              <p class="item-category"></p>
              <p class="item-title"><a href="/blog/2017/09/puppeteer/" class="title">è¯‘æ–‡ï¼šPuppeteer ä¸ Chrome Headless â€”â€” ä»å…¥é—¨åˆ°çˆ¬è™«</a></p>
              <p class="item-date"><time datetime="2017-08-31T16:14:09.000Z" itemprop="datePublished">2017-09-01</time></p>
            </div>
          </li>
        
          <li>
            
            <div class="item-thumbnail">
              <a href="/blog/2017/08/npm-scripts/" class="thumbnail">
  
    <span style="background-image:url(/blog/gallery/sri-lanka/P60417-160040.jpg)" alt="npm scripts ä¹‹ publish å’Œ install" class="thumbnail-image"></span>
  
</a>
            </div>
            
            <div class="item-inner">
              <p class="item-category"></p>
              <p class="item-title"><a href="/blog/2017/08/npm-scripts/" class="title">npm scripts ä¹‹ publish å’Œ install</a></p>
              <p class="item-date"><time datetime="2017-08-24T10:18:32.000Z" itemprop="datePublished">2017-08-24</time></p>
            </div>
          </li>
        
          <li>
            
            <div class="item-thumbnail">
              <a href="/blog/2017/06/weex-challenger/" class="thumbnail">
  
    <span style="background-image:url(/blog/gallery/sri-lanka/P60412-162831.jpg)" alt="æˆ‘è¯•äº†ä¸€ä¸‹ weex" class="thumbnail-image"></span>
  
</a>
            </div>
            
            <div class="item-inner">
              <p class="item-category"></p>
              <p class="item-title"><a href="/blog/2017/06/weex-challenger/" class="title">æˆ‘è¯•äº†ä¸€ä¸‹ weex</a></p>
              <p class="item-date"><time datetime="2017-06-15T12:03:59.000Z" itemprop="datePublished">2017-06-15</time></p>
            </div>
          </li>
        
      </ul>
    </div>
  </div>

  
  <!-- Top -->
  <div id="toTop" class="fa fa-chevron-up"></div>
</aside>
      
    </div>
    <footer id="footer">
  
  <div class="outer">
    <!-- Buy Me a Coffee -->
    <div style="margin: 10px;">
      <style>.bmc-button img{width: 27px !important;margin-bottom: 1px !important;box-shadow: none !important;border: none !important;vertical-align: middle !important;}.bmc-button{line-height: 36px !important;height:37px !important;text-decoration: none !important;display:inline-flex !important;color:#ffffff !important;background-color:#FF813F !important;border-radius: 3px !important;border: 1px solid transparent !important;padding: 0px 9px !important;font-size: 17px !important;letter-spacing:-0.08px !important;box-shadow: 0px 1px 2px rgba(190, 190, 190, 0.5) !important;-webkit-box-shadow: 0px 1px 2px 2px rgba(190, 190, 190, 0.5) !important;margin: 0 auto !important;font-family:'Lato', sans-serif !important;-webkit-box-sizing: border-box !important;box-sizing: border-box !important;-o-transition: 0.3s all linear !important;-webkit-transition: 0.3s all linear !important;-moz-transition: 0.3s all linear !important;-ms-transition: 0.3s all linear !important;transition: 0.3s all linear !important;}.bmc-button:hover, .bmc-button:active, .bmc-button:focus {-webkit-box-shadow: 0px 1px 2px 2px rgba(190, 190, 190, 0.5) !important;text-decoration: none !important;box-shadow: 0px 1px 2px 2px rgba(190, 190, 190, 0.5) !important;opacity: 0.85 !important;color:#ffffff !important;}</style>
      <link href="https://fonts.googleapis.com/css?family=Lato&subset=latin,latin-ext" rel="stylesheet">
      <a class="bmc-button" target="_blank" href="https://www.buymeacoffee.com/csbun">
        <img src="https://www.buymeacoffee.com/assets/img/BMC-btn-logo.svg" alt="Buy me a coffee"><span style="margin-left:5px">Buy me a coffee</span>
      </a>
    </div>
    <div id="footer-info" class="inner">
      &copy; 2014 - 2020 å‰èµ·æ¥å°±å¯ä»¥çƒ§<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>. Theme by <a href="http://github.com/ppoffice">PPOffice</a>
    </div>
  </div>
</footer>
    

<link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css">
<script src="https://unpkg.com/gitalk/dist/gitalk.min.js"></script>
<script type="text/javascript">
  (function() {
    const gitalk = new Gitalk({
      clientID: '445f3ebe09ddd1d6a1eb',
      clientSecret: '677a9844625ec22c3e39dcea819678794bb84d71',
      repo: 'blog',
      owner: 'csbun',
      admin: ['csbun'],
      id: location.pathname,      // Ensure uniqueness and length less than 50
      // createIssueManually: true,
      distractionFreeMode: false,  // Facebook-like distraction free mode
    });
    gitalk.render('comments')
  })();
</script>



 <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>




  <link rel="stylesheet" href="/blog/fancybox/jquery.fancybox.css">
  <script src="/blog/fancybox/jquery.fancybox.pack.js"></script>


<script src="/blog/js/script.js"></script>

    <script src="//unpkg.com/algolia-search-idd@0.1.0/dest/index.min.js"></script>
<script type="text/javascript">
(function () {
  const algoliaConfig = document.querySelector('meta[property="algolia:search"]').dataset;
  $('.search-form')
    .attr('autocomplete', 'off')
    // .on('submit', function(e) {
    //   e.preventDefault();
    // });
  window.algoliaSearchIDD({
    el: '.search-form-input',
    applicationID: algoliaConfig.applicationId,
    apiKey: algoliaConfig.apiKey,
    indexName: algoliaConfig.indexName,
  });
})()
</script>
  </div>
</body>
</html>
